<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–∞–Ω–µ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ - Digital Twin Factory</title>
    <link rel="stylesheet" href="/static/css/dark-theme.css">
    <link rel="stylesheet" href="/static/css/theme-switcher.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        .dev-badge {
            background: linear-gradient(135deg, #ffd700, #ffa500);
            color: #000;
            padding: 4px 12px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .feature-card {
            background: var(--bg-secondary);
            border-radius: 16px;
            padding: 25px;
            border: 1px solid var(--border-color);
            transition: transform 0.3s;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(109, 40, 217, 0.3);
        }
        
        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        .feature-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--accent-primary);
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-box {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: var(--accent-primary);
        }
        
        .stat-label {
            color: var(--text-muted);
            font-size: 0.9rem;
        }
        
        .code-block {
            background: #1a1a1a;
            color: #e0e0e0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
        }
        
        .dev-tools {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .dev-tool-btn {
            background: var(--accent-gradient);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s;
            width: 100%;
        }
        
        .dev-tool-btn:hover {
            transform: scale(1.05);
        }
        
        .api-endpoint {
            background: var(--bg-secondary);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            font-family: monospace;
        }
        
        .method {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .method.get { background: #61affe; color: white; }
        .method.post { background: #49cc90; color: white; }
        .method.put { background: #fca130; color: white; }
        .method.delete { background: #f93e3e; color: white; }
    </style>
</head>
<body class="dark-theme">
    <div class="container">
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav class="navbar">
            <a href="/" class="navbar-brand">üè≠ Digital Twin Factory</a>
            <ul class="navbar-menu">
                <li class="navbar-item"><a href="/">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li class="navbar-item"><a href="/generator">–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä</a></li>
                <li class="navbar-item"><a href="/tariffs">–¢–∞—Ä–∏—Ñ—ã</a></li>
                <li class="navbar-item"><a href="/dashboard">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a></li>
                <li class="navbar-item active"><a href="/developer">üë®‚Äçüíª –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫</a></li>
                <li class="navbar-item"><a href="#" onclick="logout()">–í—ã—Ö–æ–¥</a></li>
                <li class="navbar-item">
                    <div class="theme-switch-wrapper">
                        <label class="theme-switch">
                            <input type="checkbox" id="theme-toggle">
                            <span class="slider"></span>
                        </label>
                    </div>
                </li>
            </ul>
        </nav>

        <!-- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ -->
        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h1 class="card-title">üë®‚Äçüíª –ü–∞–Ω–µ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞</h1>
                    <p style="color: var(--text-muted);">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span id="devName">Developer</span>! –£ –≤–∞—Å –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º —Å–∏—Å—Ç–µ–º—ã.</p>
                </div>
                <div>
                    <span class="dev-badge">üëë –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö</span>
                </div>
            </div>
        </div>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="stats-container">
            <div class="stat-box">
                <div class="stat-value" id="totalUsers">0</div>
                <div class="stat-label">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="totalGenerations">0</div>
                <div class="stat-label">–í—Å–µ–≥–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–π</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="totalPatients">0</div>
                <div class="stat-label">–í—Å–µ–≥–æ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="totalVisits">0</div>
                <div class="stat-label">–í—Å–µ–≥–æ –≤–∏–∑–∏—Ç–æ–≤</div>
            </div>
        </div>

        <!-- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ -->
        <div class="card">
            <h2 class="card-title">‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –≤–∞—à–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <div class="feature-icon">üöÄ</div>
                    <div class="feature-title">–ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</div>
                    <p style="color: var(--text-muted);">–ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–∫–æ–ª—å–∫–æ —É–≥–æ–¥–Ω–æ –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üí∞</div>
                    <div class="feature-title">–í—Å–µ —Ç–∞—Ä–∏—Ñ—ã</div>
                    <p style="color: var(--text-muted);">–î–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ —Ç–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üîß</div>
                    <div class="feature-title">Dev Tools</div>
                    <p style="color: var(--text-muted);">–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üìä</div>
                    <div class="feature-title">–ú–µ—Ç—Ä–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã</div>
                    <p style="color: var(--text-muted);">–î–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –º–µ—Ç—Ä–∏–∫–∞–º –∏ –ª–æ–≥–∞–º</p>
                </div>
            </div>
        </div>

        <!-- Dev Tools -->
        <div class="card">
            <h2 class="card-title">üõ†Ô∏è Dev Tools</h2>
            <div class="dev-tools">
                <button class="dev-tool-btn" onclick="generateLargeDataset()">
                    üìä –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å 100k –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤
                </button>
                <button class="dev-tool-btn" onclick="clearAllJobs()">
                    üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏
                </button>
                <button class="dev-tool-btn" onclick="exportAllData()">
                    üì• –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
                </button>
                <button class="dev-tool-btn" onclick="runDiagnostics()">
                    üîç –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
                </button>
                <button class="dev-tool-btn" onclick="toggleDebugMode()">
                    üêõ –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å Debug —Ä–µ–∂–∏–º
                </button>
                <button class="dev-tool-btn" onclick="viewLogs()">
                    üìã –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
                </button>
            </div>
        </div>

        <!-- API Endpoints -->
        <div class="card">
            <h2 class="card-title">üîå API Endpoints (–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø)</h2>
            <div class="api-endpoint">
                <span class="method get">GET</span>
                <code>/api/v1/admin/users</code> - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            </div>
            <div class="api-endpoint">
                <span class="method get">GET</span>
                <code>/api/v1/admin/stats</code> - –ø–æ–ª–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã
            </div>
            <div class="api-endpoint">
                <span class="method post">POST</span>
                <code>/api/v1/admin/generate/unlimited</code> - –±–µ–∑–ª–∏–º–∏—Ç–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
            </div>
            <div class="api-endpoint">
                <span class="method delete">DELETE</span>
                <code>/api/v1/admin/jobs/all</code> - —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏
            </div>
            <div class="api-endpoint">
                <span class="method get">GET</span>
                <code>/api/v1/admin/logs</code> - –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Å–∏—Å—Ç–µ–º—ã
            </div>
        </div>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ -->
        <div class="card">
            <h2 class="card-title">‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ</h2>
            <div class="code-block" id="systemInfo">
                –ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...
            </div>
        </div>
    </div>

    <script src="/static/js/theme-switcher.js"></script>
    <script>
        let currentUser = null;

        async function loadDeveloperData() {
            const token = localStorage.getItem('token');
            if (!token) {
                window.location.href = '/login';
                return;
            }

            try {
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
                const userResponse = await fetch('/api/v1/auth/me', {
                    headers: {'Authorization': `Bearer ${token}`}
                });
                currentUser = await userResponse.json();
                
                document.getElementById('devName').textContent = currentUser.full_name || currentUser.username;
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–∏—Å—Ç–µ–º–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                loadSystemStats();
                loadSystemInfo();
                
            } catch (error) {
                console.error('Error:', error);
            }
        }

        async function loadSystemStats() {
            try {
                const token = localStorage.getItem('token');
                const response = await fetch('/api/v1/admin/stats', {
                    headers: {'Authorization': `Bearer ${token}`}
                });
                const stats = await response.json();
                
                document.getElementById('totalUsers').textContent = stats.total_users || 0;
                document.getElementById('totalGenerations').textContent = stats.total_generations || 0;
                document.getElementById('totalPatients').textContent = (stats.total_patients || 0).toLocaleString();
                document.getElementById('totalVisits').textContent = (stats.total_visits || 0).toLocaleString();
                
            } catch (error) {
                console.error('Error loading stats:', error);
            }
        }

        async function loadSystemInfo() {
            const info = {
                version: '3.0.0',
                environment: 'development',
                python_version: '3.11',
                fastapi_version: '0.104.1',
                database: 'PostgreSQL (dev)',
                redis: 'connected',
                uptime: '5 days 12 hours',
                last_deploy: '2024-02-14 10:30:00',
                total_users: 42,
                active_users: 15,
                total_generations: 1234,
                storage_used: '2.3 GB / 10 GB'
            };
            
            document.getElementById('systemInfo').textContent = JSON.stringify(info, null, 2);
        }

        // Dev Tools —Ñ—É–Ω–∫—Ü–∏–∏
        function generateLargeDataset() {
            alert('–ó–∞–ø—É—â–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è 100,000 –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤. –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç.');
        }

        function clearAllJobs() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏?')) {
                alert('–í—Å–µ –∑–∞–¥–∞—á–∏ —É–¥–∞–ª–µ–Ω—ã');
            }
        }

        function exportAllData() {
            alert('–≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞—á–∞—Ç. –§–∞–π–ª –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –≤–∞—à email.');
        }

        function runDiagnostics() {
            alert('–ó–∞–ø—É—Å–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã...');
        }

        function toggleDebugMode() {
            alert('Debug —Ä–µ–∂–∏–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω');
        }

        function viewLogs() {
            window.open('/logs', '_blank');
        }

        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            window.location.href = '/';
        }

        window.onload = loadDeveloperData;
    </script>
</body>
</html>
